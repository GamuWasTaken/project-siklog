import"../chunks/DsnmJJEf.js";import{V as be,h as D,I as Y,aj as we,K as pe,C as qe,aL as ye,D as Pe,p as c,a3 as Re,F as Ke,H as Ve,G as ve,J as $,S as J,ak as Be,ao as Je,M as ne,P as ze,aM as U,aN as X,O as q,aO as fe,aH as Fe,aP as de,as as ke,ag as Me,Q as Ee,R as Ge,aQ as We,aR as ee,W as Ye,aS as Se,aT as Qe,am as Ue,aU as Xe,ar as Ze,aV as je,$ as $e,aW as xe,T as ea,ab as aa,aX as ra,aY as ta,aZ as na,m as sa,a_ as la,aI as P,Z as Ie,_ as C,l as Te,aJ as Ae,x as R,j as I,s as ce,i as S,y as K,z as x,n as _e,B as O,A as E,f as F,t as se,a$ as oa,c as ia}from"../chunks/Db33hXkT.js";import{o as ua,d as ue,e as va,s as Q}from"../chunks/BOXI4BxR.js";import{p as fa,b as da,i as ca}from"../chunks/eSAgyZcA.js";import{r as he}from"../chunks/CSmZJpFB.js";import"../chunks/DNDgC7_S.js";function _a(e,a){D&&Y(we(e)),be(()=>{var r=a();for(var t in r){var n=r[t];n?e.style.setProperty(t,n):e.style.removeProperty(t)}})}function le(e,a){return a}function ha(e,a,r){for(var t=e.items,n=[],s=a.length,l=0;l<s;l++)Xe(a[l].e,n,!0);var u=s>0&&n.length===0&&r!==null;if(u){var v=r.parentNode;Ze(v),v.append(r),t.clear(),N(e,a[0].prev,a[s-1].next)}je(n,()=>{for(var f=0;f<s;f++){var _=a[f];u||(t.delete(_.k),N(e,_.prev,_.next)),Se(_.e,!u)}})}function oe(e,a,r,t,n,s=null){var l=e,u={flags:a,items:new Map,first:null},v=(a&ye)!==0;if(v){var f=e;l=D?Y(we(f)):f.appendChild(pe())}D&&Pe();var _=null,b=!1,m=new Map,w=Re(()=>{var p=r();return Me(p)?p:p==null?[]:ke(p)}),i,g;function d(){ma(g,i,u,m,l,n,a,t,r),s!==null&&(i.length===0?_?Ee(_):_=ne(()=>s(l)):_!==null&&Ge(_,()=>{_=null}))}qe(()=>{g??=$e,i=c(w);var p=i.length;if(b&&p===0)return;b=p===0;let M=!1;if(D){var T=Ke(l)===Ve;T!==(p===0)&&(l=ve(),Y(l),$(!1),M=!0)}if(D){for(var L=null,y,o=0;o<p;o++){if(J.nodeType===Be&&J.data===Je){l=J,M=!0,$(!1);break}var h=i[o],k=t(h,o);y=ie(J,u,L,null,h,k,o,n,a,r),u.items.set(k,y),L=y}p>0&&Y(ve())}if(D)p===0&&s&&(_=ne(()=>s(l)));else if(ze()){var V=new Set,G=q;for(o=0;o<p;o+=1){h=i[o],k=t(h,o);var H=u.items.get(k)??m.get(k);H?(a&(U|X))!==0&&Ne(H,h,o,a):(y=ie(null,u,null,null,h,k,o,n,a,r,!0),m.set(k,y)),V.add(k)}for(const[A,W]of u.items)V.has(A)||G.skipped_effects.add(W.e);G.add_callback(d)}else d();M&&$(!0),c(w)}),D&&(l=J)}function ma(e,a,r,t,n,s,l,u,v){var f=(l&Qe)!==0,_=(l&(U|X))!==0,b=a.length,m=r.items,w=r.first,i=w,g,d=null,p,M=[],T=[],L,y,o,h;if(f)for(h=0;h<b;h+=1)L=a[h],y=u(L,h),o=m.get(y),o!==void 0&&(o.a?.measure(),(p??=new Set).add(o));for(h=0;h<b;h+=1){if(L=a[h],y=u(L,h),o=m.get(y),o===void 0){var k=t.get(y);if(k!==void 0){t.delete(y),m.set(y,k);var V=d?d.next:i;N(r,d,k),N(r,k,V),ae(k,V,n),d=k}else{var G=i?i.e.nodes_start:n;d=ie(G,r,d,d===null?r.first:d.next,L,y,h,s,l,v)}m.set(y,d),M=[],T=[],i=d.next;continue}if(_&&Ne(o,L,h,l),(o.e.f&ee)!==0&&(Ee(o.e),f&&(o.a?.unfix(),(p??=new Set).delete(o))),o!==i){if(g!==void 0&&g.has(o)){if(M.length<T.length){var H=T[0],A;d=H.prev;var W=M[0],Z=M[M.length-1];for(A=0;A<M.length;A+=1)ae(M[A],H,n);for(A=0;A<T.length;A+=1)g.delete(T[A]);N(r,W.prev,Z.next),N(r,d,W),N(r,Z,H),i=H,d=Z,h-=1,M=[],T=[]}else g.delete(o),ae(o,i,n),N(r,o.prev,o.next),N(r,o,d===null?r.first:d.next),N(r,d,o),d=o;continue}for(M=[],T=[];i!==null&&i.k!==y;)(i.e.f&ee)===0&&(g??=new Set).add(i),T.push(i),i=i.next;if(i===null)continue;o=i}M.push(o),d=o,i=o.next}if(i!==null||g!==void 0){for(var B=g===void 0?[]:ke(g);i!==null;)(i.e.f&ee)===0&&B.push(i),i=i.next;var j=B.length;if(j>0){var Oe=(l&ye)!==0&&b===0?n:null;if(f){for(h=0;h<j;h+=1)B[h].a?.measure();for(h=0;h<j;h+=1)B[h].a?.fix()}ha(r,B,Oe)}}f&&Ye(()=>{if(p!==void 0)for(o of p)o.a?.apply()}),e.first=r.first&&r.first.e,e.last=d&&d.e;for(var He of t.values())Se(He.e);t.clear()}function Ne(e,a,r,t){(t&U)!==0&&fe(e.v,a),(t&X)!==0?fe(e.i,r):e.i=r}function ie(e,a,r,t,n,s,l,u,v,f,_){var b=(v&U)!==0,m=(v&We)===0,w=b?m?Fe(n,!1,!1):de(n):n,i=(v&X)===0?l:de(l),g={i,v:w,k:s,a:null,e:null,prev:r,next:t};try{if(e===null){var d=document.createDocumentFragment();d.append(e=pe())}return g.e=ne(()=>u(e,w,i,f),D),g.e.prev=r&&r.e,g.e.next=t&&t.e,r===null?_||(a.first=g):(r.next=g,r.e.next=g.e),t!==null&&(t.prev=g,t.e.prev=g.e),g}finally{}}function ae(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,n=a?a.e.nodes_start:r,s=e.e.nodes_start;s!==null&&s!==t;){var l=Ue(s);n.before(s),s=l}}function N(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function Ce(e,a,r=!1){if(e.multiple){if(a==null)return;if(!Me(a))return ra();for(var t of e.options)t.selected=a.includes(z(t));return}for(t of e.options){var n=z(t);if(ta(n,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function ga(e){var a=new MutationObserver(()=>{Ce(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),aa(()=>{a.disconnect()})}function ba(e,a,r=a){var t=!0;xe(e,"change",n=>{var s=n?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(s),z);else{var u=e.querySelector(s)??e.querySelector("option:not([disabled])");l=u&&z(u)}r(l)}),ea(()=>{var n=a();if(Ce(e,n,t),t&&n===void 0){var s=e.querySelector(":checked");s!==null&&(n=z(s),r(n))}e.__value=n,t=!1}),ga(e)}function z(e){return"__value"in e?e.__value:e.value}function me(e,a,r=a){var t=na(),n=new WeakSet;xe(e,"input",s=>{var l=s?e.defaultValue:e.value;if(l=re(e)?te(l):l,r(l),q!==null&&n.add(q),t&&l!==(l=a())){var u=e.selectionStart,v=e.selectionEnd;e.value=l??"",v!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(v,e.value.length))}}),(D&&e.defaultValue!==e.value||sa(a)==null&&e.value)&&(r(re(e)?te(e.value):e.value),q!==null&&n.add(q)),be(()=>{var s=a();if(e===document.activeElement){var l=la??q;if(n.has(l))return}re(e)&&s===te(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function re(e){var a=e.type;return a==="number"||a==="range"}function te(e){return e===""?null:+e}function ge(e,a){let r=P(Ie(a));return ua(()=>{const t=localStorage[e];t&&C(r,JSON.parse(t),!0),Te(()=>{localStorage[e]=JSON.stringify(c(r))})}),()=>c(r)}const wa=()=>{const e=ge("__keys",[]),a=Ae(()=>e().reduce((r,t)=>(r[t.name]=ge(t.name,[]),r),{}));return{get keys(){return e()},get logs(){return c(a)}}};var pa=(e,a)=>{e.target===c(a)&&c(a).close()},ya=I('<dialog class="svelte-m4lzef"><div class="svelte-m4lzef"><!> <!></div></dialog>');function Le(e,a){R(a,!0);let r=fa(a,"showModal",15),t=P(void 0);Te(()=>{r()?c(t).showModal():c(t).close()});var n=ya();n.__click=[pa,t];var s=x(n),l=x(s);ce(l,()=>a.header??_e);var u=O(l,2);ce(u,()=>a.children??_e),E(s),E(n),da(n,v=>C(t,v),()=>c(t)),va("close",n,()=>r(!1)),S(e,n),K()}ue(["click"]);function De(){return{icon:"",name:""}}function ka(e,a){return e.name===a.name}function Ma(e,a){return!(!a.name||e.keys.some(r=>ka(r,a)))}function Ea(e,a,r){C(a,!1),r.saveLog()}var Sa=(e,a)=>C(a,!0),xa=I("<h2> </h2>"),Ia=I('<button class="modal-ok">Si</button>'),Ta=I('<button class="key"><i class="svelte-f36rqx"> </i> <p> </p></button> <!>',1);function Aa(e,a){R(a,!0);let r=P(!1);var t=Ta(),n=F(t);n.__click=[Sa,r];var s=x(n),l=x(s,!0);E(s);var u=O(s,2),v=x(u,!0);E(u),E(n);var f=O(n,2);Le(f,{get showModal(){return c(r)},set showModal(b){C(r,b,!0)},header:b=>{var m=xa(),w=x(m);E(m),se(()=>Q(w,`Guardar log de ${a.key.name??""}?`)),S(b,m)},children:(b,m)=>{var w=Ia();w.__click=[Ea,r,a],S(b,w)},$$slots:{header:!0,default:!0}}),se(()=>{Q(l,a.key.icon),Q(v,a.key.name)}),S(e,t),K()}ue(["click"]);var Na=oa('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1bv6469"><path d="M6 12H18M12 6V18" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svelte-1bv6469"></path></svg>');function Ca(e){var a=Na();S(e,a)}function La(e,a,r,t){C(a,!1),r.saveKey(c(t)),C(t,De(),!0)}var Da=(e,a)=>C(a,!0),Oa=I("<h2>Nuevo log</h2>"),Ha=I('<div class="key svelte-1w4pisa"><input placeholder="✏️" maxlength="2" class="svelte-1w4pisa"/> <input placeholder="Nuevo log" class="svelte-1w4pisa"/></div> <button class="modal-ok">Guardar</button>',1),qa=I('<button class="key"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button> <!>',1);function Pa(e,a){R(a,!0);let r=P(!1),t=P(Ie(De()));var n=qa(),s=F(n);s.__click=[Da,r];var l=x(s);_a(l,()=>({"--color":"var(--mg)"})),Ca(l.lastChild),E(l),E(s);var u=O(s,2);Le(u,{get showModal(){return c(r)},set showModal(f){C(r,f,!0)},header:f=>{var _=Oa();S(f,_)},children:(f,_)=>{var b=Ha(),m=F(b),w=x(m);he(w);var i=O(w,2);he(i),E(m);var g=O(m,2);g.__click=[La,r,a,t],me(w,()=>c(t).icon,d=>c(t).icon=d),me(i,()=>c(t).name,d=>c(t).name=d),S(f,b)},$$slots:{header:!0,default:!0}}),S(e,n),K()}ue(["click"]);var Ra=I('<div class="keypad svelte-1hwao0q"><!> <!></div>');function Ka(e,a){R(a,!0);const r=u=>{Ma(a.s,u)&&a.s.keys.push(u)},t=u=>a.s.logs[u]().push(new Date);var n=Ra(),s=x(n);Pa(s,{saveKey:r});var l=O(s,2);oe(l,17,()=>a.s.keys,le,(u,v)=>{Aa(u,{saveLog:()=>t(c(v).name),get key(){return c(v)}})}),E(n),S(e,n),K()}var Va=I("<option> </option>"),Ba=I("<div><select></select> <!></div>");function Ja(e,a){R(a,!0);let r=P(void 0);const t=(v,f)=>v().splice(f,1);var n=Ba(),s=x(n);oe(s,21,()=>a.s.keys,le,(v,f)=>{var _=Va(),b=x(_);E(_);var m={};se(()=>{Q(b,`${c(f).icon??""}${c(f).name??""}`),m!==(m=c(f).name)&&(_.value=(_.__value=c(f).name)??"")}),S(v,_)}),E(s);var l=O(s,2);{var u=v=>{var f=ia(),_=F(f);oe(_,17,()=>a.s.logs[c(r)](),le,(b,m,w)=>{{let i=Ae(()=>new Date(c(m)));Log(b,{get date(){return c(i)},remove:()=>t(a.s.logs[c(r)],w)})}}),S(v,f)};ca(l,v=>{a.s.logs[c(r)]&&v(u)})}E(n),ba(s,()=>c(r),v=>C(r,v)),S(e,n),K()}var za=I("<!> <!>",1);function Xa(e,a){R(a,!0);const r=wa();var t=za(),n=F(t);Ka(n,{get s(){return r}});var s=O(n,2);Ja(s,{get s(){return r}}),S(e,t),K()}export{Xa as component};
